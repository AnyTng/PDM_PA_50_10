@startuml
skinparam class {
    BackgroundColor #F2FFF2
    BorderColor #2A2A2A
    FontSize 13
}

' ============================================
'                ENTIDADES
' ============================================

class Beneficiario {
    -idBeneficiario : string
    -nomeCompleto : string
    -telemovel : string
    -dataNasc : dateTime
    -email : string
    -curso : string
    -ativo : boolean
    -apoioEmergencialSocial : boolean
    -bolsaEstudo : boolean
    -ccpasaporte : string
    -estadoConta : string
    -idFuncionario : int
    -nacionalidade : string
    -necessidade : array
    -relacaoIPCA : string
    -ultimoApoio : dateTime
    -validadeConta : dateTime
}

class ColaboradorSAS {
    -nome : string
    -cargo : string
    -admin : boolean
    -codPostal : string
    -contacto : float
    -dataNasc : dateTime
    -email : string
    -morada : string
    -nif : float
}

class CategoriaProduto {
    -idCategoria : string
    -categoria : string
}

class Produto {
    -idProduto : string
    -nomeProduto : string
    -descProduto : string
    -dataValidade : dateTime
    -dataEntrada : dateTime
    -codigoBarras : string
    -idCampanha : string
    -doado : string
    -estadoProduto : string
    -marca : string
    -subCategoria : string
    -tamanho : array
    -descParceiroExterno : string
    -atributtes : array
}

class Campanha {
    -idCampanha : string
    -nome : string
    -dataInicio : dateTime
    -dataFim : dateTime
    -tipo : Enum(interna, Externa)
    -descCampanha : string
}

class ContaUtilizador {
    -email : string
    -password : string
    -dataCriacao : dateTime
}

class PedidoApoio {
    -idPedido : int
    -dataPedido : dateTime
    -motivoDescricao : string
    -estado : Enum
    -idBeneficiario : string
    -idFunc : string
}

class Apoio {
    -dataAgendada : dateTime
    -idApoio : string
    -dataEntregaReal : dateTime
    -estado : Enum
    -observacoes : string
    -tipoApoio : string
    -idFunc : string
    -dataAtual : dateTime
    -produtos : array
}

class ItemApoio {
    -quantidade : int
}

class InstituicaoParceira {
    -nome : string
    -contacto : string
}

class DoacaoSaida {
    -data : dateTime
    -motivo : string
}

' ============================================
'                RELAÇÕES
' ============================================

' --- Beneficiário e Apoios ---
Beneficiario "1" -- "*" Apoio : recebe >

' --- Apoio Mensal (Cabaz) composição ---
Apoio "1" *-- "*" ItemApoio : composto_por
ItemApoio "*" --> "1" Produto : produto >

' --- Stock e Categorias ---
Produto "*" --> "1" CategoriaProduto : pertence_a >

' --- Produtos vindos de campanhas ---
Produto "*" --> "0..1" Campanha : proveniente_de >

' --- Saída externa de produtos (fim validade) ---
DoacaoSaida "1" *-- "*" Produto : contem >
DoacaoSaida "*" --> "1" InstituicaoParceira : destinada_a >

' --- Colaborador SAS controla processos ---
ColaboradorSAS "1" --> "*" Produto : gere_stock >
ColaboradorSAS "1" --> "*" Apoio : regista >
ColaboradorSAS "1" --> "*" Campanha : cria >

' --- Pedidos de apoio iniciais ---
PedidoApoio "1" --> "1" Beneficiario : pedido_por >
PedidoApoio "1" --> "1" ColaboradorSAS : analisado_por >

' --- Conta Utilizador associada a colaborador ---
ContaUtilizador "1" --> "1" ColaboradorSAS : pertence_a >

@enduml

